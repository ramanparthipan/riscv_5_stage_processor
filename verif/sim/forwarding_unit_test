#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2009.vpi";
S_0x59e637b89db0 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
enum0x59e637b48b80 .enum4 (1)
   "SRC1_REG1" 1'b0,
   "SRC1_PC" 1'b1
 ;
enum0x59e637b494e0 .enum4 (1)
   "SRC2_REG2" 1'b0,
   "SRC2_IMM" 1'b1
 ;
enum0x59e637b7d370 .enum4 (2)
   "WRSRC_ALURES" 2'b00,
   "WRSRC_MEMREAD" 2'b01,
   "WRSRC_PC4" 2'b10
 ;
enum0x59e637b7d9c0 .enum4 (4)
   "ALU_NOP" 4'b0000,
   "ALU_ADD" 4'b0001,
   "ALU_SUB" 4'b0010,
   "ALU_XOR" 4'b0011,
   "ALU_OR" 4'b0100,
   "ALU_AND" 4'b0101,
   "ALU_SL" 4'b0110,
   "ALU_SRL" 4'b0111,
   "ALU_SRA" 4'b1000,
   "ALU_LT" 4'b1001,
   "ALU_LTU" 4'b1010,
   "ALU_LUI" 4'b1011
 ;
enum0x59e637b7ea40 .enum4 (3)
   "BR_NOP" 3'b000,
   "BR_EQ" 3'b001,
   "BR_NE" 3'b010,
   "BR_LT" 3'b011,
   "BR_GE" 3'b100,
   "BR_LTU" 3'b101,
   "BR_GEU" 3'b110
 ;
enum0x59e637b7f530 .enum4 (4)
   "MEM_NOP" 4'b0000,
   "MEM_SB" 4'b0001,
   "MEM_SH" 4'b0010,
   "MEM_SW" 4'b0011,
   "MEM_LB" 4'b0100,
   "MEM_LH" 4'b0101,
   "MEM_LW" 4'b0110,
   "MEM_LBU" 4'b0111,
   "MEM_LHU" 4'b1000
 ;
enum0x59e637b92600 .enum4 (2)
   "FWD_SRC_ID" 2'b00,
   "FWD_SRC_MEM" 2'b01,
   "FWD_SRC_WB" 2'b10
 ;
S_0x59e637b88450 .scope module, "forwarding_unit_tb" "forwarding_unit_tb" 3 3;
 .timescale -9 -12;
enum0x59e637b92cd0 .enum4 (2)
   "WRSRC_ALURES" 2'b00,
   "WRSRC_MEMREAD" 2'b01,
   "WRSRC_PC4" 2'b10
 ;
enum0x59e637b932e0 .enum4 (1)
   "SRC1_REG1" 1'b0,
   "SRC1_PC" 1'b1
 ;
enum0x59e637b937d0 .enum4 (1)
   "SRC2_REG2" 1'b0,
   "SRC2_IMM" 1'b1
 ;
enum0x59e637b93ce0 .enum4 (4)
   "ALU_NOP" 4'b0000,
   "ALU_ADD" 4'b0001,
   "ALU_SUB" 4'b0010,
   "ALU_XOR" 4'b0011,
   "ALU_OR" 4'b0100,
   "ALU_AND" 4'b0101,
   "ALU_SL" 4'b0110,
   "ALU_SRL" 4'b0111,
   "ALU_SRA" 4'b1000,
   "ALU_LT" 4'b1001,
   "ALU_LTU" 4'b1010,
   "ALU_LUI" 4'b1011
 ;
enum0x59e637b94d50 .enum4 (3)
   "BR_NOP" 3'b000,
   "BR_EQ" 3'b001,
   "BR_NE" 3'b010,
   "BR_LT" 3'b011,
   "BR_GE" 3'b100,
   "BR_LTU" 3'b101,
   "BR_GEU" 3'b110
 ;
enum0x59e637b95840 .enum4 (4)
   "MEM_NOP" 4'b0000,
   "MEM_SB" 4'b0001,
   "MEM_SH" 4'b0010,
   "MEM_SW" 4'b0011,
   "MEM_LB" 4'b0100,
   "MEM_LH" 4'b0101,
   "MEM_LW" 4'b0110,
   "MEM_LBU" 4'b0111,
   "MEM_LHU" 4'b1000
 ;
enum0x59e637b96590 .enum4 (2)
   "FWD_SRC_ID" 2'b00,
   "FWD_SRC_MEM" 2'b01,
   "FWD_SRC_WB" 2'b10
 ;
v0x59e637bc2b60_0 .net "alu_reg1_forwarding_ctrl", 1 0, v0x59e637b889d0_0;  1 drivers
v0x59e637bc2c40_0 .net "alu_reg2_forwarding_ctrl", 1 0, v0x59e637b497b0_0;  1 drivers
v0x59e637bc2ce0_0 .var "ex_reg1_idx", 4 0;
v0x59e637bc2d80_0 .var "ex_reg2_idx", 4 0;
v0x59e637bc2e20_0 .var "mem_reg_wr_en", 0 0;
v0x59e637bc2f10_0 .var "mem_reg_wr_idx", 4 0;
v0x59e637bc2fe0_0 .var "wb_reg_wr_en", 0 0;
v0x59e637bc30b0_0 .var "wb_reg_wr_idx", 4 0;
S_0x59e637b88b90 .scope module, "dut" "forwarding_unit" 3 12, 4 3 0, S_0x59e637b88450;
 .timescale 0 0;
    .port_info 0 /INPUT 5 "ex_reg1_idx";
    .port_info 1 /INPUT 5 "ex_reg2_idx";
    .port_info 2 /INPUT 5 "mem_reg_wr_idx";
    .port_info 3 /INPUT 1 "mem_reg_wr_en";
    .port_info 4 /INPUT 5 "wb_reg_wr_idx";
    .port_info 5 /INPUT 1 "wb_reg_wr_en";
    .port_info 6 /OUTPUT 2 "alu_reg1_forwarding_ctrl";
    .port_info 7 /OUTPUT 2 "alu_reg2_forwarding_ctrl";
v0x59e637b889d0_0 .var "alu_reg1_forwarding_ctrl", 1 0;
v0x59e637b497b0_0 .var "alu_reg2_forwarding_ctrl", 1 0;
v0x59e637b49ba0_0 .net "ex_reg1_idx", 4 0, v0x59e637bc2ce0_0;  1 drivers
v0x59e637bc2250_0 .net "ex_reg2_idx", 4 0, v0x59e637bc2d80_0;  1 drivers
v0x59e637bc2330_0 .net "mem_reg_wr_en", 0 0, v0x59e637bc2e20_0;  1 drivers
v0x59e637bc2440_0 .net "mem_reg_wr_idx", 4 0, v0x59e637bc2f10_0;  1 drivers
v0x59e637bc2520_0 .net "wb_reg_wr_en", 0 0, v0x59e637bc2fe0_0;  1 drivers
v0x59e637bc25e0_0 .net "wb_reg_wr_idx", 4 0, v0x59e637bc30b0_0;  1 drivers
E_0x59e637b83960/0 .event edge, v0x59e637b49ba0_0, v0x59e637bc2330_0, v0x59e637bc2440_0, v0x59e637bc2520_0;
E_0x59e637b83960/1 .event edge, v0x59e637bc25e0_0, v0x59e637bc2250_0;
E_0x59e637b83960 .event/or E_0x59e637b83960/0, E_0x59e637b83960/1;
S_0x59e637bc2810 .scope function.str, "fwd_src_to_string" "fwd_src_to_string" 3 15, 3 15 0, S_0x59e637b88450;
 .timescale -9 -12;
; Variable fwd_src_to_string is string return value of scope S_0x59e637bc2810
v0x59e637bc2a80_0 .var "src", 1 0;
TD_forwarding_unit_tb.fwd_src_to_string ;
    %load/vec4 v0x59e637bc2a80_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_0.0, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_0.1, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_0.2, 6;
    %pushi/str "X";
    %ret/str 0; Assign to fwd_src_to_string
    %disable S_0x59e637bc2810;
    %jmp T_0.4;
T_0.0 ;
    %pushi/str "ID";
    %ret/str 0; Assign to fwd_src_to_string
    %disable S_0x59e637bc2810;
    %jmp T_0.4;
T_0.1 ;
    %pushi/str "MEM";
    %ret/str 0; Assign to fwd_src_to_string
    %disable S_0x59e637bc2810;
    %jmp T_0.4;
T_0.2 ;
    %pushi/str "WB";
    %ret/str 0; Assign to fwd_src_to_string
    %disable S_0x59e637bc2810;
    %jmp T_0.4;
T_0.4 ;
    %pop/vec4 1;
    %end;
    .scope S_0x59e637b88b90;
T_1 ;
Ewait_0 .event/or E_0x59e637b83960, E_0x0;
    %wait Ewait_0;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x59e637b889d0_0, 0, 2;
    %load/vec4 v0x59e637b49ba0_0;
    %pad/u 32;
    %cmpi/ne 0, 0, 32;
    %jmp/0xz  T_1.0, 4;
    %load/vec4 v0x59e637bc2330_0;
    %load/vec4 v0x59e637bc2440_0;
    %load/vec4 v0x59e637b49ba0_0;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.2, 8;
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x59e637b889d0_0, 0, 2;
    %jmp T_1.3;
T_1.2 ;
    %load/vec4 v0x59e637bc2520_0;
    %load/vec4 v0x59e637bc25e0_0;
    %load/vec4 v0x59e637b49ba0_0;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.4, 8;
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x59e637b889d0_0, 0, 2;
T_1.4 ;
T_1.3 ;
T_1.0 ;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x59e637b497b0_0, 0, 2;
    %load/vec4 v0x59e637bc2250_0;
    %pad/u 32;
    %cmpi/ne 0, 0, 32;
    %jmp/0xz  T_1.6, 4;
    %load/vec4 v0x59e637bc2330_0;
    %load/vec4 v0x59e637bc2440_0;
    %load/vec4 v0x59e637bc2250_0;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.8, 8;
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x59e637b497b0_0, 0, 2;
    %jmp T_1.9;
T_1.8 ;
    %load/vec4 v0x59e637bc2520_0;
    %load/vec4 v0x59e637bc25e0_0;
    %load/vec4 v0x59e637bc2250_0;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.10, 8;
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x59e637b497b0_0, 0, 2;
T_1.10 ;
T_1.9 ;
T_1.6 ;
    %jmp T_1;
    .thread T_1, $push;
    .scope S_0x59e637b88450;
T_2 ;
    %vpi_call/w 3 24 "$display", "--- Starting Forwarding Unit Test ---" {0 0 0};
    %pushi/vec4 1, 0, 5;
    %store/vec4 v0x59e637bc2ce0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x59e637bc2d80_0, 0, 5;
    %pushi/vec4 3, 0, 5;
    %store/vec4 v0x59e637bc2f10_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2e20_0, 0, 1;
    %pushi/vec4 4, 0, 5;
    %store/vec4 v0x59e637bc30b0_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2fe0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x59e637bc2b60_0;
    %pushi/vec4 0, 0, 2;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x59e637bc2c40_0;
    %pushi/vec4 0, 0, 2;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.0, 8;
    %vpi_call/w 3 33 "$display", "PASS: No Hazard." {0 0 0};
    %jmp T_2.1;
T_2.0 ;
    %load/vec4 v0x59e637bc2b60_0;
    %store/vec4 v0x59e637bc2a80_0, 0, 2;
    %callf/str TD_forwarding_unit_tb.fwd_src_to_string, S_0x59e637bc2810;
    %load/vec4 v0x59e637bc2c40_0;
    %store/vec4 v0x59e637bc2a80_0, 0, 2;
    %callf/str TD_forwarding_unit_tb.fwd_src_to_string, S_0x59e637bc2810;
    %vpi_call/w 3 35 "$error", "FAIL: No Hazard. Got %s, %s", S<1,str>, S<0,str> {0 0 2};
T_2.1 ;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x59e637bc2ce0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x59e637bc2d80_0, 0, 5;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x59e637bc2f10_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2e20_0, 0, 1;
    %pushi/vec4 4, 0, 5;
    %store/vec4 v0x59e637bc30b0_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2fe0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x59e637bc2b60_0;
    %cmpi/e 1, 0, 2;
    %jmp/0xz  T_2.2, 4;
    %vpi_call/w 3 44 "$display", "PASS: Forward from MEM to ALU op1." {0 0 0};
    %jmp T_2.3;
T_2.2 ;
    %load/vec4 v0x59e637bc2b60_0;
    %store/vec4 v0x59e637bc2a80_0, 0, 2;
    %callf/str TD_forwarding_unit_tb.fwd_src_to_string, S_0x59e637bc2810;
    %vpi_call/w 3 46 "$error", "FAIL: Forward from MEM. Got %s", S<0,str> {0 0 1};
T_2.3 ;
    %pushi/vec4 1, 0, 5;
    %store/vec4 v0x59e637bc2ce0_0, 0, 5;
    %pushi/vec4 7, 0, 5;
    %store/vec4 v0x59e637bc2d80_0, 0, 5;
    %pushi/vec4 3, 0, 5;
    %store/vec4 v0x59e637bc2f10_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2e20_0, 0, 1;
    %pushi/vec4 7, 0, 5;
    %store/vec4 v0x59e637bc30b0_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2fe0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x59e637bc2c40_0;
    %cmpi/e 2, 0, 2;
    %jmp/0xz  T_2.4, 4;
    %vpi_call/w 3 56 "$display", "PASS: Forward from WB to ALU op2." {0 0 0};
    %jmp T_2.5;
T_2.4 ;
    %load/vec4 v0x59e637bc2c40_0;
    %store/vec4 v0x59e637bc2a80_0, 0, 2;
    %callf/str TD_forwarding_unit_tb.fwd_src_to_string, S_0x59e637bc2810;
    %vpi_call/w 3 58 "$error", "FAIL: Forward from WB. Got %s", S<0,str> {0 0 1};
T_2.5 ;
    %vpi_call/w 3 62 "$display", "\012--- Testing Priority (MEM must be chosen over WB) ---" {0 0 0};
    %pushi/vec4 10, 0, 5;
    %store/vec4 v0x59e637bc2ce0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x59e637bc2d80_0, 0, 5;
    %pushi/vec4 10, 0, 5;
    %store/vec4 v0x59e637bc2f10_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2e20_0, 0, 1;
    %pushi/vec4 10, 0, 5;
    %store/vec4 v0x59e637bc30b0_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2fe0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x59e637bc2b60_0;
    %cmpi/e 1, 0, 2;
    %jmp/0xz  T_2.6, 4;
    %vpi_call/w 3 68 "$display", "PASS: Priority correct. Forwarded from MEM." {0 0 0};
    %jmp T_2.7;
T_2.6 ;
    %load/vec4 v0x59e637bc2b60_0;
    %store/vec4 v0x59e637bc2a80_0, 0, 2;
    %callf/str TD_forwarding_unit_tb.fwd_src_to_string, S_0x59e637bc2810;
    %vpi_call/w 3 70 "$error", "FAIL: Priority incorrect. Got %s", S<0,str> {0 0 1};
T_2.7 ;
    %pushi/vec4 0, 0, 5;
    %store/vec4 v0x59e637bc2ce0_0, 0, 5;
    %pushi/vec4 0, 0, 5;
    %store/vec4 v0x59e637bc2f10_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x59e637bc2e20_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x59e637bc2b60_0;
    %cmpi/e 0, 0, 2;
    %jmp/0xz  T_2.8, 4;
    %vpi_call/w 3 78 "$display", "PASS: No forwarding for x0." {0 0 0};
    %jmp T_2.9;
T_2.8 ;
    %vpi_call/w 3 80 "$error", "FAIL: Incorrectly forwarded for x0." {0 0 0};
T_2.9 ;
    %vpi_call/w 3 82 "$display", "\012--- Forwarding Unit Test Finished ---" {0 0 0};
    %vpi_call/w 3 83 "$finish" {0 0 0};
    %end;
    .thread T_2;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "-";
    "verif/src/forwarding_unit_tb.sv";
    "design/rtl/forwarding_unit.sv";
