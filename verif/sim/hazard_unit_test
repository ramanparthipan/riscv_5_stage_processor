#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2009.vpi";
S_0x5c2bd3e895b0 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
P_0x5c2bd3e704d0 .param/l "OP_AUIPC" 1 3 19, C4<0010111>;
P_0x5c2bd3e70510 .param/l "OP_BRANCH" 1 3 11, C4<1100011>;
P_0x5c2bd3e70550 .param/l "OP_IMM" 1 3 5, C4<0010011>;
P_0x5c2bd3e70590 .param/l "OP_JAL" 1 3 13, C4<1101111>;
P_0x5c2bd3e705d0 .param/l "OP_JALR" 1 3 15, C4<1100111>;
P_0x5c2bd3e70610 .param/l "OP_LOAD" 1 3 7, C4<0000011>;
P_0x5c2bd3e70650 .param/l "OP_LUI" 1 3 17, C4<0110111>;
P_0x5c2bd3e70690 .param/l "OP_REG" 1 3 3, C4<0110011>;
P_0x5c2bd3e706d0 .param/l "OP_STORE" 1 3 9, C4<0100011>;
P_0x5c2bd3e70710 .param/l "OP_SYSTEM" 1 3 21, C4<1110011>;
enum0x5c2bd3e32b80 .enum4 (6)
   "NOP" 6'b000000,
   "ADD" 6'b000001,
   "SUB" 6'b000010,
   "XOR" 6'b000011,
   "OR" 6'b000100,
   "AND" 6'b000101,
   "SLL" 6'b000110,
   "SRL" 6'b000111,
   "SRA" 6'b001000,
   "SLT" 6'b001001,
   "SLTU" 6'b001010,
   "ADDI" 6'b001011,
   "XORI" 6'b001100,
   "ORI" 6'b001101,
   "ANDI" 6'b001110,
   "SLLI" 6'b001111,
   "SRLI" 6'b010000,
   "SRAI" 6'b010001,
   "SLTI" 6'b010010,
   "SLTIU" 6'b010011,
   "LB" 6'b010100,
   "LH" 6'b010101,
   "LW" 6'b010110,
   "LBU" 6'b010111,
   "LHU" 6'b011000,
   "SB" 6'b011001,
   "SH" 6'b011010,
   "SW" 6'b011011,
   "BEQ" 6'b011100,
   "BNE" 6'b011101,
   "BLT" 6'b011110,
   "BGE" 6'b011111,
   "BLTU" 6'b100000,
   "BGEU" 6'b100001,
   "JAL" 6'b100010,
   "JALR" 6'b100011,
   "LUI" 6'b100100,
   "AUIPC" 6'b100101,
   "ECALL" 6'b100110,
   "EBREAK" 6'b100111
 ;
S_0x5c2bd3e71e50 .scope module, "hazard_unit_tb" "hazard_unit_tb" 4 3;
 .timescale -9 -12;
P_0x5c2bd3e6ca10 .param/l "OP_AUIPC" 1 3 19, C4<0010111>;
P_0x5c2bd3e6ca50 .param/l "OP_BRANCH" 1 3 11, C4<1100011>;
P_0x5c2bd3e6ca90 .param/l "OP_IMM" 1 3 5, C4<0010011>;
P_0x5c2bd3e6cad0 .param/l "OP_JAL" 1 3 13, C4<1101111>;
P_0x5c2bd3e6cb10 .param/l "OP_JALR" 1 3 15, C4<1100111>;
P_0x5c2bd3e6cb50 .param/l "OP_LOAD" 1 3 7, C4<0000011>;
P_0x5c2bd3e6cb90 .param/l "OP_LUI" 1 3 17, C4<0110111>;
P_0x5c2bd3e6cbd0 .param/l "OP_REG" 1 3 3, C4<0110011>;
P_0x5c2bd3e6cc10 .param/l "OP_STORE" 1 3 9, C4<0100011>;
P_0x5c2bd3e6cc50 .param/l "OP_SYSTEM" 1 3 21, C4<1110011>;
enum0x5c2bd3e334e0 .enum4 (6)
   "NOP" 6'b000000,
   "ADD" 6'b000001,
   "SUB" 6'b000010,
   "XOR" 6'b000011,
   "OR" 6'b000100,
   "AND" 6'b000101,
   "SLL" 6'b000110,
   "SRL" 6'b000111,
   "SRA" 6'b001000,
   "SLT" 6'b001001,
   "SLTU" 6'b001010,
   "ADDI" 6'b001011,
   "XORI" 6'b001100,
   "ORI" 6'b001101,
   "ANDI" 6'b001110,
   "SLLI" 6'b001111,
   "SRLI" 6'b010000,
   "SRAI" 6'b010001,
   "SLTI" 6'b010010,
   "SLTIU" 6'b010011,
   "LB" 6'b010100,
   "LH" 6'b010101,
   "LW" 6'b010110,
   "LBU" 6'b010111,
   "LHU" 6'b011000,
   "SB" 6'b011001,
   "SH" 6'b011010,
   "SW" 6'b011011,
   "BEQ" 6'b011100,
   "BNE" 6'b011101,
   "BLT" 6'b011110,
   "BGE" 6'b011111,
   "BLTU" 6'b100000,
   "BGEU" 6'b100001,
   "JAL" 6'b100010,
   "JALR" 6'b100011,
   "LUI" 6'b100100,
   "AUIPC" 6'b100101,
   "ECALL" 6'b100110,
   "EBREAK" 6'b100111
 ;
v0x5c2bd3ea98a0_0 .var "ex_do_mem_read_en", 0 0;
v0x5c2bd3ea9960_0 .var "ex_reg_wr_idx", 4 0;
v0x5c2bd3ea9a00_0 .net "hazardFEEnable", 0 0, L_0x5c2bd3eba850;  1 drivers
v0x5c2bd3ea9aa0_0 .net "hazardIDEXClear", 0 0, L_0x5c2bd3eba550;  1 drivers
v0x5c2bd3ea9b40_0 .net "hazardIFIDClear", 0 0, L_0x5c2bd3eba690;  1 drivers
v0x5c2bd3ea9be0_0 .var "id_reg1_idx", 4 0;
v0x5c2bd3ea9c80_0 .var "id_reg2_idx", 4 0;
v0x5c2bd3ea9d50_0 .var "opcode_in", 5 0;
S_0x5c2bd3e888d0 .scope module, "dut" "hazard_unit" 4 16, 5 3 0, S_0x5c2bd3e71e50;
 .timescale 0 0;
    .port_info 0 /INPUT 6 "opcode_in";
    .port_info 1 /INPUT 5 "id_reg1_idx";
    .port_info 2 /INPUT 5 "id_reg2_idx";
    .port_info 3 /INPUT 5 "ex_reg_wr_idx";
    .port_info 4 /INPUT 1 "ex_do_mem_read_en";
    .port_info 5 /OUTPUT 1 "hazardFEEnable";
    .port_info 6 /OUTPUT 1 "hazardIFIDClear";
    .port_info 7 /OUTPUT 1 "hazardIDEXClear";
L_0x5c2bd3e88420 .functor AND 1, v0x5c2bd3ea98a0_0, L_0x5c2bd3eb9fd0, C4<1>, C4<1>;
L_0x5c2bd3e88490 .functor OR 1, L_0x5c2bd3eba1e0, L_0x5c2bd3eba2d0, C4<0>, C4<0>;
L_0x5c2bd3eba440 .functor AND 1, L_0x5c2bd3e88420, L_0x5c2bd3e88490, C4<1>, C4<1>;
L_0x5c2bd3eba550 .functor BUFZ 1, L_0x5c2bd3eba440, C4<0>, C4<0>, C4<0>;
L_0x5c2bd3eba690 .functor BUFZ 1, v0x5c2bd3ea96e0_0, C4<0>, C4<0>, C4<0>;
L_0x5c2bd3eba750 .functor OR 1, L_0x5c2bd3eba440, v0x5c2bd3ea96e0_0, C4<0>, C4<0>;
v0x5c2bd3e720f0_0 .net *"_ivl_0", 31 0, L_0x5c2bd3ea9e20;  1 drivers
v0x5c2bd3ea8930_0 .net *"_ivl_10", 0 0, L_0x5c2bd3eba1e0;  1 drivers
v0x5c2bd3ea89f0_0 .net *"_ivl_12", 0 0, L_0x5c2bd3eba2d0;  1 drivers
v0x5c2bd3ea8a90_0 .net *"_ivl_15", 0 0, L_0x5c2bd3e88490;  1 drivers
v0x5c2bd3ea8b50_0 .net *"_ivl_23", 0 0, L_0x5c2bd3eba750;  1 drivers
L_0x7f626bad0018 .functor BUFT 1, C4<000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5c2bd3ea8c60_0 .net *"_ivl_3", 26 0, L_0x7f626bad0018;  1 drivers
L_0x7f626bad0060 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5c2bd3ea8d40_0 .net/2u *"_ivl_4", 31 0, L_0x7f626bad0060;  1 drivers
v0x5c2bd3ea8e20_0 .net *"_ivl_6", 0 0, L_0x5c2bd3eb9fd0;  1 drivers
v0x5c2bd3ea8ee0_0 .net *"_ivl_9", 0 0, L_0x5c2bd3e88420;  1 drivers
v0x5c2bd3ea8fa0_0 .net "ex_do_mem_read_en", 0 0, v0x5c2bd3ea98a0_0;  1 drivers
v0x5c2bd3ea9060_0 .net "ex_reg_wr_idx", 4 0, v0x5c2bd3ea9960_0;  1 drivers
v0x5c2bd3ea9140_0 .net "hazardFEEnable", 0 0, L_0x5c2bd3eba850;  alias, 1 drivers
v0x5c2bd3ea9200_0 .net "hazardIDEXClear", 0 0, L_0x5c2bd3eba550;  alias, 1 drivers
v0x5c2bd3ea92c0_0 .net "hazardIFIDClear", 0 0, L_0x5c2bd3eba690;  alias, 1 drivers
v0x5c2bd3ea9380_0 .net "id_reg1_idx", 4 0, v0x5c2bd3ea9be0_0;  1 drivers
v0x5c2bd3ea9460_0 .net "id_reg2_idx", 4 0, v0x5c2bd3ea9c80_0;  1 drivers
v0x5c2bd3ea9540_0 .net "load_use_hazard", 0 0, L_0x5c2bd3eba440;  1 drivers
v0x5c2bd3ea9600_0 .net "opcode_in", 5 0, v0x5c2bd3ea9d50_0;  1 drivers
v0x5c2bd3ea96e0_0 .var "pc_jump_hazard", 0 0;
E_0x5c2bd3e6d6b0 .event edge, v0x5c2bd3ea9600_0;
L_0x5c2bd3ea9e20 .concat [ 5 27 0 0], v0x5c2bd3ea9960_0, L_0x7f626bad0018;
L_0x5c2bd3eb9fd0 .cmp/ne 32, L_0x5c2bd3ea9e20, L_0x7f626bad0060;
L_0x5c2bd3eba1e0 .cmp/eq 5, v0x5c2bd3ea9960_0, v0x5c2bd3ea9be0_0;
L_0x5c2bd3eba2d0 .cmp/eq 5, v0x5c2bd3ea9960_0, v0x5c2bd3ea9c80_0;
L_0x5c2bd3eba850 .reduce/nor L_0x5c2bd3eba750;
    .scope S_0x5c2bd3e888d0;
T_0 ;
Ewait_0 .event/or E_0x5c2bd3e6d6b0, E_0x0;
    %wait Ewait_0;
    %load/vec4 v0x5c2bd3ea9600_0;
    %dup/vec4;
    %pushi/vec4 28, 0, 6;
    %cmp/u;
    %jmp/1 T_0.0, 6;
    %dup/vec4;
    %pushi/vec4 29, 0, 6;
    %cmp/u;
    %jmp/1 T_0.1, 6;
    %dup/vec4;
    %pushi/vec4 30, 0, 6;
    %cmp/u;
    %jmp/1 T_0.2, 6;
    %dup/vec4;
    %pushi/vec4 31, 0, 6;
    %cmp/u;
    %jmp/1 T_0.3, 6;
    %dup/vec4;
    %pushi/vec4 32, 0, 6;
    %cmp/u;
    %jmp/1 T_0.4, 6;
    %dup/vec4;
    %pushi/vec4 33, 0, 6;
    %cmp/u;
    %jmp/1 T_0.5, 6;
    %dup/vec4;
    %pushi/vec4 34, 0, 6;
    %cmp/u;
    %jmp/1 T_0.6, 6;
    %dup/vec4;
    %pushi/vec4 35, 0, 6;
    %cmp/u;
    %jmp/1 T_0.7, 6;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.0 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.1 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.2 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.3 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.4 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.5 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.6 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.7 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea96e0_0, 0, 1;
    %jmp T_0.9;
T_0.9 ;
    %pop/vec4 1;
    %jmp T_0;
    .thread T_0, $push;
    .scope S_0x5c2bd3e71e50;
T_1 ;
    %vpi_call/w 4 20 "$display", "--- Starting Hazard Unit Test ---" {0 0 0};
    %vpi_call/w 4 23 "$display", "\012--- Testing No Hazard Scenario ---" {0 0 0};
    %pushi/vec4 1, 0, 6;
    %store/vec4 v0x5c2bd3ea9d50_0, 0, 6;
    %pushi/vec4 1, 0, 5;
    %store/vec4 v0x5c2bd3ea9be0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x5c2bd3ea9c80_0, 0, 5;
    %pushi/vec4 3, 0, 5;
    %store/vec4 v0x5c2bd3ea9960_0, 0, 5;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5c2bd3ea98a0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x5c2bd3ea9aa0_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5c2bd3ea9a00_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5c2bd3ea9b40_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.0, 8;
    %vpi_call/w 4 28 "$display", "PASS: No hazard detected correctly." {0 0 0};
    %jmp T_1.1;
T_1.0 ;
    %vpi_call/w 4 30 "$error", "FAIL: Incorrect signals for no-hazard case." {0 0 0};
T_1.1 ;
    %vpi_call/w 4 34 "$display", "\012--- Testing Load-Use Hazard ---" {0 0 0};
    %pushi/vec4 1, 0, 6;
    %store/vec4 v0x5c2bd3ea9d50_0, 0, 6;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x5c2bd3ea9be0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x5c2bd3ea9c80_0, 0, 5;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x5c2bd3ea9960_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c2bd3ea98a0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x5c2bd3ea9aa0_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5c2bd3ea9a00_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5c2bd3ea9b40_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.2, 8;
    %vpi_call/w 4 39 "$display", "PASS: Load-use hazard detected correctly." {0 0 0};
    %jmp T_1.3;
T_1.2 ;
    %vpi_call/w 4 41 "$error", "FAIL: Incorrect signals for load-use case." {0 0 0};
T_1.3 ;
    %vpi_call/w 4 44 "$display", "\012--- Testing Control Hazard ---" {0 0 0};
    %pushi/vec4 28, 0, 6;
    %store/vec4 v0x5c2bd3ea9d50_0, 0, 6;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5c2bd3ea98a0_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x5c2bd3ea9aa0_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5c2bd3ea9b40_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5c2bd3ea9a00_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.4, 8;
    %vpi_call/w 4 49 "$display", "PASS: Control hazard (branch) detected correctly." {0 0 0};
    %jmp T_1.5;
T_1.4 ;
    %vpi_call/w 4 51 "$error", "FAIL: Incorrect signals for control hazard case." {0 0 0};
T_1.5 ;
    %vpi_call/w 4 53 "$display", "\012--- Hazard Unit Test Finished ---" {0 0 0};
    %vpi_call/w 4 54 "$finish" {0 0 0};
    %end;
    .thread T_1;
# The file index is used to find the file name in the following table.
:file_names 6;
    "N/A";
    "<interactive>";
    "-";
    "design/lib/opcodes.sv";
    "verif/src/hazard_unit_tb.sv";
    "design/rtl/hazard_unit.sv";
