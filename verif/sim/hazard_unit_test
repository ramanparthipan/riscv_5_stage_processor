#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2009.vpi";
S_0x5c43c46f5ef0 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
P_0x5c43c46f6080 .param/l "OP_AUIPC" 1 3 19, C4<0010111>;
P_0x5c43c46f60c0 .param/l "OP_BRANCH" 1 3 11, C4<1100011>;
P_0x5c43c46f6100 .param/l "OP_IMM" 1 3 5, C4<0010011>;
P_0x5c43c46f6140 .param/l "OP_JAL" 1 3 13, C4<1101111>;
P_0x5c43c46f6180 .param/l "OP_JALR" 1 3 15, C4<1100111>;
P_0x5c43c46f61c0 .param/l "OP_LOAD" 1 3 7, C4<0000011>;
P_0x5c43c46f6200 .param/l "OP_LUI" 1 3 17, C4<0110111>;
P_0x5c43c46f6240 .param/l "OP_REG" 1 3 3, C4<0110011>;
P_0x5c43c46f6280 .param/l "OP_STORE" 1 3 9, C4<0100011>;
P_0x5c43c46f62c0 .param/l "OP_SYSTEM" 1 3 21, C4<1110011>;
enum0x5c43c46b9b80 .enum4 (6)
   "NOP" 6'b000000,
   "ADD" 6'b000001,
   "SUB" 6'b000010,
   "XOR" 6'b000011,
   "OR" 6'b000100,
   "AND" 6'b000101,
   "SLL" 6'b000110,
   "SRL" 6'b000111,
   "SRA" 6'b001000,
   "SLT" 6'b001001,
   "SLTU" 6'b001010,
   "ADDI" 6'b001011,
   "XORI" 6'b001100,
   "ORI" 6'b001101,
   "ANDI" 6'b001110,
   "SLLI" 6'b001111,
   "SRLI" 6'b010000,
   "SRAI" 6'b010001,
   "SLTI" 6'b010010,
   "SLTIU" 6'b010011,
   "LB" 6'b010100,
   "LH" 6'b010101,
   "LW" 6'b010110,
   "LBU" 6'b010111,
   "LHU" 6'b011000,
   "SB" 6'b011001,
   "SH" 6'b011010,
   "SW" 6'b011011,
   "BEQ" 6'b011100,
   "BNE" 6'b011101,
   "BLT" 6'b011110,
   "BGE" 6'b011111,
   "BLTU" 6'b100000,
   "BGEU" 6'b100001,
   "JAL" 6'b100010,
   "JALR" 6'b100011,
   "LUI" 6'b100100,
   "AUIPC" 6'b100101,
   "ECALL" 6'b100110,
   "EBREAK" 6'b100111
 ;
S_0x5c43c46f3a10 .scope module, "hazard_unit_tb" "hazard_unit_tb" 4 3;
 .timescale -9 -12;
P_0x5c43c46f3ba0 .param/l "OP_AUIPC" 1 3 19, C4<0010111>;
P_0x5c43c46f3be0 .param/l "OP_BRANCH" 1 3 11, C4<1100011>;
P_0x5c43c46f3c20 .param/l "OP_IMM" 1 3 5, C4<0010011>;
P_0x5c43c46f3c60 .param/l "OP_JAL" 1 3 13, C4<1101111>;
P_0x5c43c46f3ca0 .param/l "OP_JALR" 1 3 15, C4<1100111>;
P_0x5c43c46f3ce0 .param/l "OP_LOAD" 1 3 7, C4<0000011>;
P_0x5c43c46f3d20 .param/l "OP_LUI" 1 3 17, C4<0110111>;
P_0x5c43c46f3d60 .param/l "OP_REG" 1 3 3, C4<0110011>;
P_0x5c43c46f3da0 .param/l "OP_STORE" 1 3 9, C4<0100011>;
P_0x5c43c46f3de0 .param/l "OP_SYSTEM" 1 3 21, C4<1110011>;
enum0x5c43c46ba4e0 .enum4 (6)
   "NOP" 6'b000000,
   "ADD" 6'b000001,
   "SUB" 6'b000010,
   "XOR" 6'b000011,
   "OR" 6'b000100,
   "AND" 6'b000101,
   "SLL" 6'b000110,
   "SRL" 6'b000111,
   "SRA" 6'b001000,
   "SLT" 6'b001001,
   "SLTU" 6'b001010,
   "ADDI" 6'b001011,
   "XORI" 6'b001100,
   "ORI" 6'b001101,
   "ANDI" 6'b001110,
   "SLLI" 6'b001111,
   "SRLI" 6'b010000,
   "SRAI" 6'b010001,
   "SLTI" 6'b010010,
   "SLTIU" 6'b010011,
   "LB" 6'b010100,
   "LH" 6'b010101,
   "LW" 6'b010110,
   "LBU" 6'b010111,
   "LHU" 6'b011000,
   "SB" 6'b011001,
   "SH" 6'b011010,
   "SW" 6'b011011,
   "BEQ" 6'b011100,
   "BNE" 6'b011101,
   "BLT" 6'b011110,
   "BGE" 6'b011111,
   "BLTU" 6'b100000,
   "BGEU" 6'b100001,
   "JAL" 6'b100010,
   "JALR" 6'b100011,
   "LUI" 6'b100100,
   "AUIPC" 6'b100101,
   "ECALL" 6'b100110,
   "EBREAK" 6'b100111
 ;
v0x5c43c4729c40_0 .var "ex_do_mem_read_en", 0 0;
v0x5c43c4729d00_0 .var "ex_reg_wr_idx", 4 0;
v0x5c43c4729da0_0 .net "hazardFEEnable", 0 0, L_0x5c43c473aa40;  1 drivers
v0x5c43c4729e40_0 .net "hazardIDEXClear", 0 0, L_0x5c43c473a900;  1 drivers
v0x5c43c4729ee0_0 .var "id_reg1_idx", 4 0;
v0x5c43c4729f80_0 .var "id_reg2_idx", 4 0;
v0x5c43c472a020_0 .var "opcode_in", 5 0;
S_0x5c43c46f7330 .scope module, "dut" "hazard_unit" 4 15, 5 3 0, S_0x5c43c46f3a10;
 .timescale 0 0;
    .port_info 0 /INPUT 6 "opcode_in";
    .port_info 1 /INPUT 5 "id_reg1_idx";
    .port_info 2 /INPUT 5 "id_reg2_idx";
    .port_info 3 /INPUT 5 "ex_reg_wr_idx";
    .port_info 4 /INPUT 1 "ex_do_mem_read_en";
    .port_info 5 /OUTPUT 1 "hazardFEEnable";
    .port_info 6 /OUTPUT 1 "hazardIDEXClear";
L_0x5c43c473a410 .functor AND 1, v0x5c43c4729c40_0, L_0x5c43c473a2a0, C4<1>, C4<1>;
L_0x5c43c473a6e0 .functor OR 1, L_0x5c43c473a520, L_0x5c43c473a610, C4<0>, C4<0>;
L_0x5c43c473a7f0 .functor AND 1, L_0x5c43c473a410, L_0x5c43c473a6e0, C4<1>, C4<1>;
L_0x5c43c473a900 .functor BUFZ 1, L_0x5c43c473a7f0, C4<0>, C4<0>, C4<0>;
v0x5c43c46f75c0_0 .net *"_ivl_0", 31 0, L_0x5c43c472a0f0;  1 drivers
v0x5c43c4728f30_0 .net *"_ivl_10", 0 0, L_0x5c43c473a520;  1 drivers
v0x5c43c4728ff0_0 .net *"_ivl_12", 0 0, L_0x5c43c473a610;  1 drivers
v0x5c43c4729090_0 .net *"_ivl_15", 0 0, L_0x5c43c473a6e0;  1 drivers
L_0x7272b066f018 .functor BUFT 1, C4<000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5c43c4729150_0 .net *"_ivl_3", 26 0, L_0x7272b066f018;  1 drivers
L_0x7272b066f060 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5c43c4729280_0 .net/2u *"_ivl_4", 31 0, L_0x7272b066f060;  1 drivers
v0x5c43c4729360_0 .net *"_ivl_6", 0 0, L_0x5c43c473a2a0;  1 drivers
v0x5c43c4729420_0 .net *"_ivl_9", 0 0, L_0x5c43c473a410;  1 drivers
v0x5c43c47294e0_0 .net "ex_do_mem_read_en", 0 0, v0x5c43c4729c40_0;  1 drivers
v0x5c43c47295a0_0 .net "ex_reg_wr_idx", 4 0, v0x5c43c4729d00_0;  1 drivers
v0x5c43c4729680_0 .net "hazardFEEnable", 0 0, L_0x5c43c473aa40;  alias, 1 drivers
v0x5c43c4729740_0 .net "hazardIDEXClear", 0 0, L_0x5c43c473a900;  alias, 1 drivers
v0x5c43c4729800_0 .net "id_reg1_idx", 4 0, v0x5c43c4729ee0_0;  1 drivers
v0x5c43c47298e0_0 .net "id_reg2_idx", 4 0, v0x5c43c4729f80_0;  1 drivers
v0x5c43c47299c0_0 .net "load_use_hazard", 0 0, L_0x5c43c473a7f0;  1 drivers
v0x5c43c4729a80_0 .net "opcode_in", 5 0, v0x5c43c472a020_0;  1 drivers
L_0x5c43c472a0f0 .concat [ 5 27 0 0], v0x5c43c4729d00_0, L_0x7272b066f018;
L_0x5c43c473a2a0 .cmp/ne 32, L_0x5c43c472a0f0, L_0x7272b066f060;
L_0x5c43c473a520 .cmp/eq 5, v0x5c43c4729d00_0, v0x5c43c4729ee0_0;
L_0x5c43c473a610 .cmp/eq 5, v0x5c43c4729d00_0, v0x5c43c4729f80_0;
L_0x5c43c473aa40 .reduce/nor L_0x5c43c473a7f0;
    .scope S_0x5c43c46f3a10;
T_0 ;
    %vpi_call/w 4 19 "$display", "--- Starting Hazard Unit Test ---" {0 0 0};
    %vpi_call/w 4 22 "$display", "\012--- Testing No Hazard Scenario ---" {0 0 0};
    %pushi/vec4 1, 0, 6;
    %store/vec4 v0x5c43c472a020_0, 0, 6;
    %pushi/vec4 1, 0, 5;
    %store/vec4 v0x5c43c4729ee0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x5c43c4729f80_0, 0, 5;
    %pushi/vec4 3, 0, 5;
    %store/vec4 v0x5c43c4729d00_0, 0, 5;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5c43c4729c40_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x5c43c4729e40_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5c43c4729da0_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %vpi_call/w 4 27 "$display", "PASS: No hazard detected correctly." {0 0 0};
    %jmp T_0.1;
T_0.0 ;
    %vpi_call/w 4 29 "$error", "FAIL: Incorrect signals for no-hazard case." {0 0 0};
T_0.1 ;
    %vpi_call/w 4 33 "$display", "\012--- Testing Load-Use Hazard ---" {0 0 0};
    %pushi/vec4 1, 0, 6;
    %store/vec4 v0x5c43c472a020_0, 0, 6;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x5c43c4729ee0_0, 0, 5;
    %pushi/vec4 2, 0, 5;
    %store/vec4 v0x5c43c4729f80_0, 0, 5;
    %pushi/vec4 5, 0, 5;
    %store/vec4 v0x5c43c4729d00_0, 0, 5;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5c43c4729c40_0, 0, 1;
    %delay 1000, 0;
    %load/vec4 v0x5c43c4729e40_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5c43c4729da0_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.2, 8;
    %vpi_call/w 4 38 "$display", "PASS: Load-use hazard detected correctly." {0 0 0};
    %jmp T_0.3;
T_0.2 ;
    %vpi_call/w 4 40 "$error", "FAIL: Incorrect signals for load-use case." {0 0 0};
T_0.3 ;
    %vpi_call/w 4 43 "$display", "\012--- Hazard Unit Test Finished ---" {0 0 0};
    %vpi_call/w 4 44 "$finish" {0 0 0};
    %end;
    .thread T_0;
# The file index is used to find the file name in the following table.
:file_names 6;
    "N/A";
    "<interactive>";
    "-";
    "design/lib/opcodes.sv";
    "verif/src/hazard_unit_tb.sv";
    "design/rtl/hazard_unit.sv";
